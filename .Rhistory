bog <- opq(bbox = "Bogota") %>% add_osm_feature(key = "boundary", "administrative") %>% osmdata_sf()
mapview(bog$osm_lines)
library(mapview)
bog <- opq(bbox = "Bogota") %>% add_osm_feature(key = "boundary", "administrative") %>% osmdata_sf()
rm(list = ls()); gc(T)
#load packages
library(tidyverse)
library(osmdata)
library(sf)
library(geojsonsf)
library(mapview)
bog <- opq(bbox = "Bogota") %>% add_osm_feature(key = "boundary", "administrative") %>% osmdata_sf()
mapview(bog$osm_lines)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(tidyverse)
library(osmdata)
library(sf)
library(geojsonsf)
library(mapview)
library(leaflet)
caja <- getbb(place_name = "Bogota", display_name_contains = "Colombia")
caja <- getbb(place_name = "Bogota", display_name_contains = "Colombia")
caja
bank_bog <- opq(bbox = caja, timeout = 25*100) %>%
add_osm_feature(key = "amenity", value = "bank") %>%
osmdata_sf()
bank_bog <- opq(bbox = caja, timeout = 25*100) %>%
add_osm_feature(key = "amenity", value = "bank") %>%
osmdata_sf()
bank_bog
mapa1 <- mapview(bank_bog$osm_polygons[,c("osm_id","name","amenity","atm","operator")])
leaflet(mapa1@object[[1]]) %>% addProviderTiles("OpenStreetMap") %>% addPolygons(popup = bank_bog$osm_polygons$name)
docs/index.html
leaflet(mapa1@object[[1]]) %>% addProviderTiles("OpenStreetMap") %>% addPolygons(popup = bank_bog$osm_polygons$name)
mapa2 <- mapview(subset(bank_bog$osm_points[,c("osm_id","name","amenity","atm")], amenity == "bank"))
leaflet(mapa2@object[[1]]) %>% addProviderTiles("OpenStreetMap") %>% addCircles(popup = bank_bog$osm_points$name)
mapa1 <- mapview(bank_bog$osm_polygons[,c("osm_id","name","amenity","atm","operator")])
leaflet(mapa1@object[[1]]) %>% addProviderTiles("OpenStreetMap") %>% addPolygons(popup = bank_bog$osm_polygons$name)
mapa2 <- mapview(subset(bank_bog$osm_points[,c("osm_id","name","amenity","atm")], amenity == "bank"))
leaflet(mapa2@object[[1]]) %>% addProviderTiles("OpenStreetMap") %>% addCircles(popup = bank_bog$osm_points$name)
res_node <- subset(bank_bog$osm_points[,c("osm_id","name","amenity","atm")], amenity == "bank")
res_way <- mutate(bank_bog$osm_polygons[,c("osm_id","name","amenity","atm","operator")], name = ifelse(is.na(name), operator, name)) %>%
select(-"operator") %>% mutate(geometry = st_centroid(geometry), id = osm_id) %>% remove_rownames %>% column_to_rownames(var = "id")
res_bank <- bind_rows(res_node, res_way)
res_bank
mapa3 <- mapview(res_bank)
leaflet(mapa3@object[[1]]) %>% addProviderTiles("OpenStreetMap") %>% addCircles(popup = res_bank$name)
head(available_features(), 30)
head(available_tags("amenity"), 24)
head(available_tags("amenity"), 24)
get_overpass_url()
bank_bog
bank_bog
